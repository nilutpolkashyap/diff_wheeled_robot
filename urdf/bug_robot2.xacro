<?xml version="1.0" ?>
<robot name="bug_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- <xacro:include filename="$(find ros2_path_planning_robot)/urdf/materials.xacro" />
<xacro:include filename="$(find ros2_path_planning_robot)/urdf/bug_robot.gazebo" /> -->

<material name="silver">
  <color rgba="0.700 0.700 0.700 1.000"/>
</material>

<link name="base_link">
  <inertial>
    <origin rpy="0 0 0" xyz="-0.00437523774417975 -4.383875965218967e-17 0.03741540303762595"/>
    <mass value="1.3194685135182431"/>
    <inertia ixx="0.002794" ixy="-0.0" ixz="0.000276" iyy="0.004569" iyz="-0.0" izz="0.00624"/>
  </inertial>
  <visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/base_link2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/base_link2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="left_wheel_1">
  <inertial>
    <origin rpy="0 0 0" xyz="0.0 -0.012499999999999997 0.0"/>
    <mass value="0.07518292500997302"/>
    <inertia ixx="2.3e-05" ixy="0.0" ixz="0.0" iyy="3.9e-05" iyz="-0.0" izz="2.3e-05"/>
  </inertial>
  <visual>
    <origin rpy="0 0 0" xyz="0.055 0.085 -0.0325"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/left_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0.055 0.085 -0.0325"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/left_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="right_wheel_1">
  <inertial>
    <origin rpy="0 0 0" xyz="6.938893903907228e-18 0.012499999999999997 0.0"/>
    <mass value="0.07518292500997299"/>
    <inertia ixx="2.3e-05" ixy="0.0" ixz="0.0" iyy="3.9e-05" iyz="0.0" izz="2.3e-05"/>
  </inertial>
  <visual>
    <origin rpy="0 0 0" xyz="0.055 -0.085 -0.0325"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/right_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0.055 -0.085 -0.0325"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/right_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="lidar_1">
  <inertial>
    <origin rpy="0 0 0" xyz="-2.2981640954156113e-07 0.0 0.007499999999999979"/>
    <mass value="0.07966293571340313"/>
    <inertia ixx="2.6e-05" ixy="0.0" ixz="0.0" iyy="2.6e-05" iyz="-0.0" izz="4.9e-05"/>
  </inertial>
  <visual>
    <origin rpy="0 0 0" xyz="0.046503 -0.0 -0.1075"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="0.046503 -0.0 -0.1075"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="camera_1">
  <inertial>
    <origin rpy="0 0 0" xyz="0.0013912758702941952 -6.565133329183849e-05 -0.0003892293542707703"/>
    <mass value="0.006742869651497879"/>
    <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
  </inertial>
  <visual>
    <origin rpy="0 0 0" xyz="-0.084 -0.0 -0.065"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/camera_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin rpy="0 0 0" xyz="-0.084 -0.0 -0.065"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/camera_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="imu_1">
  <inertial>
    <origin xyz="-0.13 1.232595164407831e-33 0.0025000000000000022" rpy="0 0 0"/>
    <mass value="0.0314"/>
    <inertia ixx="4e-06" iyy="1e-06" izz="5e-06" ixy="-0.0" iyz="-0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.095 -0.0 -0.0525" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/imu_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.095 -0.0 -0.0525" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://ros2_path_planning_robot/meshes/imu_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<joint name="left_joint" type="continuous">
  <origin rpy="0 0 0" xyz="-0.055 -0.085 0.0325"/>
  <parent link="base_link"/>
  <child link="left_wheel_1"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="right_joint" type="continuous">
  <origin rpy="0 0 0" xyz="-0.055 0.085 0.0325"/>
  <parent link="base_link"/>
  <child link="right_wheel_1"/>
  <axis xyz="0.0 1.0 0.0"/>
</joint>

<joint name="lidar_joint" type="fixed">
  <origin rpy="0 0 0" xyz="-0.046503 0.0 0.1075"/>
  <parent link="base_link"/>
  <child link="lidar_1"/>
</joint>

<joint name="camera_joint" type="fixed">
  <origin rpy="0 0 0" xyz="0.084 0.0 0.065"/>
  <parent link="base_link"/>
  <child link="camera_1"/>
</joint>

<joint name="imu_joint" type="fixed">
  <origin xyz="0.095 0.0 0.0525" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="imu_1"/>
</joint>

  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="gazebo_base_controller">
      <odometry_frame>odom</odometry_frame>
      <commandTopic>cmd_vel</commandTopic>
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <update_rate>15.0</update_rate>
      <left_joint>right_joint</left_joint>
      <right_joint>left_joint</right_joint>
      <wheel_separation>0.150</wheel_separation>
      <wheel_diameter>0.065</wheel_diameter>
      <max_wheel_acceleration>0.7</max_wheel_acceleration>
      <robotBaseFrame>base_link</robotBaseFrame>
    </plugin>
  </gazebo>

  <gazebo reference="lidar_1">
    <sensor name="lidar" type="ray">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>15</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.1415</min_angle>
            <max_angle>3.1415</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.35</min>
          <max>15.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin name="scan" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>laser_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>

  <gazebo reference="imu_1">
    <sensor name="imu_sensor" type="imu">
    <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
        <ros>
          <namespace>/data</namespace>
          <remapping>~/out:=imu</remapping>
        </ros>
        <initial_orientation_as_reference>false</initial_orientation_as_reference>
      </plugin>
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <imu>
        <angular_velocity>
          <x>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              <bias_mean>0.0000075</bias_mean>
              <bias_stddev>0.0000008</bias_stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              <bias_mean>0.0000075</bias_mean>
              <bias_stddev>0.0000008</bias_stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              <bias_mean>0.0000075</bias_mean>
              <bias_stddev>0.0000008</bias_stddev>
            </noise>
          </z>
        </angular_velocity>
        <linear_acceleration>
          <x>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              <bias_mean>0.1</bias_mean>
              <bias_stddev>0.001</bias_stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              <bias_mean>0.1</bias_mean>
              <bias_stddev>0.001</bias_stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              <bias_mean>0.1</bias_mean>
              <bias_stddev>0.001</bias_stddev>
            </noise>
          </z>
        </linear_acceleration>
      </imu>
    </sensor>
  </gazebo>

  <gazebo reference="base_link">
    <material>Gazebo/Orange</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
    <gravity>true</gravity>
  </gazebo>
  <gazebo reference="left_wheel_1">
    <material>Gazebo/Black</material>
    <mu1>100</mu1>
    <mu2>100</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo reference="right_wheel_1">
    <material>Gazebo/Black</material>
    <mu1>100</mu1>
    <mu2>100</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>  
  <gazebo reference="lidar_1">
    <material>Gazebo/White</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo reference="camera_1">
    <material>Gazebo/White</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo reference="imu_1">
    <material>Gazebo/White</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>

</robot>
